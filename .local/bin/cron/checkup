#!/bin/sh
## 2025-07-31   SARBS

# Synchronisiert Repositories und l√§dt Updates herunter, soll als Cronjob ausgef√ºhrt werden.

notify-send "Ó¨© Repository-Synchronisierung" "√úberpr√ºfen auf Paket-Updates..."

sudo pacman -Syyuw --noconfirm || notify-send "Fehler beim Herunterladen der Updates.

√úberpr√ºfen Sie Ihre Internetverbindung, ob pacman/YAY bereits l√§uft, oder f√ºhren Sie das Update manuell aus, um Fehler zu sehen."
pkill -RTMIN+5 "${STATUSBAR:-dwmblocks}"

if pacman -Qu | grep -v "\[ignored\]"
then
	notify-send "Ó¨© Repository-Synchronisierung" "Updates verf√ºgbar. Klicken Sie auf das Statusleisten-Symbol (üì¶) f√ºr das Update."
else
	notify-send "Ó¨© Repository-Synchronisierung" "Synchronisierung abgeschlossen. Keine neuen Pakete f√ºr das Update."
fi
