#!/bin/sh
## 2025-11-07 SARBS

# DWM Workspace/Tag Anzeige f체r Polybar
# Liest die aktuellen Tags aus DWM und zeigt sie an

# DWM Status 체ber xprop lesen
dwm_status=$(xprop -root _NET_CURRENT_DESKTOP 2>/dev/null | awk '{print $3}')

# Falls xprop fehlschl채gt, Alternative versuchen
if [ -z "$dwm_status" ]; then
    # Versuche 체ber dwm's Statusbar (falls vorhanden)
    dwm_status=$(xprop -root WM_NAME 2>/dev/null | cut -d\" -f2 | grep -o '\[.*\]' | head -1)
fi

# Wenn immer noch kein Status, Default anzeigen
if [ -z "$dwm_status" ]; then
    dwm_status="0"
fi

# Berechne aktuelle Tag-Nummer (0-basiert)
current_tag=$((dwm_status + 1))

# Zeige alle Tags (1-9) mit Hervorhebung des aktuellen
for i in $(seq 1 9); do
    if [ "$i" -eq "$current_tag" ]; then
        # Aktiver Tag
        printf "%b" "%{F#ffffff}%{B#333333} $i %{B-}%{F-}"
    else
        # Inaktiver Tag
        printf "%b" "%{F#888888} $i %{F-}"
    fi
done

printf "\n"
